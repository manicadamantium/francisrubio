{% extends 'layouts/main.njk' %}
{% block content %}
  {% include 'components/navigation.njk' %}
  <main id="main" class="padding--l article gallery-layout" tabindex="-1" aria-labelledby="{{ title | slugify }}">
    <header class="article__header" style="width: min(100ch, 100%); margin-inline: auto;">
      <div class="ai--center cluster margin-bottom--l lh-s">
        <a href="/gallery/" class="button jc--start padding--xs">Gallery</a>
        <span>/</span>
        <span class="d-flex font-sans jc--start">This collection</span>
      </div>
      <h1 id="{{ title | slugify }}" class="p-name article__title margin--none responsive">{{ title | safe }}</h1>
      <p class="p-summary responsive fs-4 weight-300">{{ description }}</p>
      <div class="spaced cluster">
        <div>
          Curated by <a rel="author" class="p-author h-card" href="{{ authors[author].url }}">
            <span class="p-name">{{ authors[author].name }}</span>
            <img class="u-photo hidden" src="{{ authors[author].photo }}"/>
          </a>
          
          on <time class="dt-published" datetime="{{ page.date | machineReadableDate }}">
            <a class="u-url" href="./">{{ page.date | humanReadableDate }}</a>
          </time>
        </div>
      </div>
    </header>
    <div class="gallery-grid" style="width: min(120ch, 100%); margin-inline: auto;">
      {% for image in entries %}
        {% set baseFolder %}/assets/images/gallery/{{ folder }}/optimized{% endset %}
        {% set defaultImg %}/gallery/{{ folder }}/{{ image.key }}.{{ types[0] }}{% endset %}
        {% set identifier = image.key %}
        {% set alt = image.alt %}
        {% set imgClass = "gallery-card__image" %}
        {% set width = image.width %}
        {% set height = image.height %}
        <figure class="gallery-card">
          <a class="gallery-card__link no-arrow" href="/assets/images{{ defaultImg }}" target="_blank">
            {% include 'components/picture.njk' %}
          </a>
          <figcaption class="gallery-card__caption">
            <p>{{ image.caption | safe }}</p>
            {% if image.link %}
              <p>
                <a href="{{ image.link.url }}">{{ image.link.text | safe }}</a>
              </p>
            {% endif %}
          </figcaption>
        </figure>
      {% endfor %}
    </div>
  </main>
  {% include 'components/footer.njk' %}
{% endblock %}