@import "reset";
@import "mixins";
@import "fonts";
@import "config";

/* LAYOUTS */
@import "layouts/article";
@import "layouts/box";
@import "layouts/center";
@import "layouts/cluster";
@import "layouts/flow";
@import "layouts/sidebar";
@import "layouts/stack";

/* COMPONENTS */
@import "components/badge";
@import "components/button";
@import "components/card";
@import "components/image-scroller";
@import "components/menu";
@import "components/modal";
@import "components/navigation";
@import "components/skip-link";
@import "components/tooltip";

/* UTILITIES */
@import "utilities/alignment";
@import "utilities/border";
@import "utilities/color";
@import "utilities/display";
@import "utilities/gap";
@import "utilities/margin";
@import "utilities/overflow";
@import "utilities/padding";
@import "utilities/sizes";
@import "utilities/text";
@import "utilities/visibility";

.light,
:root {
  --fg-contrast     : var(--d-contrast);
  --fg-default      : var(--d-default);
  --fg-subtle       : var(--d-subtle);
  --fg-non-essential: var(--d-non-essential);

  --bg-primary  : var(--l-contrast);
  --bg-secondary: var(--l-default);
  --bg-accent   : var(--l-subtle);
  --bg-exception: var(--l-non-essential);

  @media (prefers-color-scheme: dark) {
    --fg-contrast     : var(--l-contrast);
    --fg-default      : var(--l-default);
    --fg-subtle       : var(--l-subtle);
    --fg-non-essential: var(--l-non-essential);

    --bg-primary  : var(--d-default);
    --bg-secondary: var(--d-contrast);
    --bg-accent   : var(--d-subtle);
    --bg-exception: var(--d-non-essential);
  }
}

.dark {
  --fg-contrast     : var(--l-contrast);
  --fg-default      : var(--l-default);
  --fg-subtle       : var(--l-subtle);
  --fg-non-essential: var(--l-non-essential);

  --bg-primary  : var(--d-default);
  --bg-secondary: var(--d-default);
  --bg-accent   : var(--d-subtle);
  --bg-exception: var(--d-non-essential);
}

.light,
.dark,
body {
  color: hsl(var(--fg-contrast) / 80%);
}

:root {
  scroll-padding-top: 7rem;
  scroll-behavior   : smooth;
}

body {
  background-color       : hsl(var(--bg-primary));
  font-family            : var(--font-body);
  font-size              : var(--type-size);
  font-variation-settings: "SOFT" 100, "WONK" 0;
  min-height             : 100vh;
  scroll-behavior        : smooth;
  font-weight            : 350;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  color      : hsl(var(--fg-contrast));
  font-family: var(--font-display-serif);
}

@for $size from 1 through 5 {
  h#{$size} {
    font-size: var(--type-size-#{$size});
  }

  h#{$size}.responsive {
    font-size: clamp(
      var(--type-size-#{$size + 1}),
      #{10 - $size}vw,
      var(--type-size-#{$size})
    );
  }
}

.feathericon {
  display        : inline-block;
  width          : 1.25em;
  height         : 1.25em;
  fill           : none;
  stroke         : currentColor;
  stroke-width   : 1px;
  stroke-linejoin: unset;
  stroke-linecap : round;
}

a {
  box-decoration-break: clone;
  color               : hsl(var(--fg-default));
  text-decoration     : underline solid hsl(var(--primary-500));

  &[target="_blank"] {
    display: inline-flex;
    gap    : 1ch;

    &::after {
      align-self         : baseline;
      content            : "ðŸ¡¥";
      margin-inline-start: auto;
    }
  }

  &:hover {
    color                : hsl(var(--primary-900));
    text-decoration-color: hsl(var(--fg-default));
  }

  &:focus-visible {
    color           : hsl(var(--primary-900));
    background-color: hsl(var(--primary-100));
    box-shadow      : 0 0 0 10px hsl(var(--primary-100));
    outline         : 5px solid hsl(var(--primary-100));
  }

  &:focus-visible {
    box-shadow: 0 0 0 10px hsl(var(--primary-300));

    @media (prefers-color-scheme: dark) {
      box-shadow: 0 0 0 10px hsl(var(--primary-700));
    }
  }
}

button {
  cursor: pointer;
}

:target {
  animation      : notify 300ms;
  animation-delay: 1000ms;
}

@keyframes notify {
  from {
    outline       : 5px solid hsl(var(--primary-500));
    outline-offset: 0;
  }

  to {
    outline       : 5px solid hsl(var(--primary-500) / 0%);
    outline-offset: 1rem;
  }
}

code,
var,
samp {
  font-family            : var(--font-mono);
  font-variation-settings: "MONO" 1, "CASL" 1, "CRSV" 1;
  font-weight            : 390;
}

:root {
  scrollbar-color: hsl(var(--bg-accent)) hsl(var(--bg-primary));
}

*::-webkit-scrollbar {
  width : 0.75em;
  height: 0.75em;
}

::-webkit-scrollbar-thumb {
  background-color: hsl(var(--bg-accent));
  border          : 3px solid hsl(var(--bg-primary));
  border-radius   : 100px;
}

::-webkit-scrollbar-track {
  background-color: hsl(var(--bg-primary));
  border-radius   : var(--ideal-radius);
}

.no-list {
  list-style: none;
  margin    : 0;
  padding   : 0;

  li:before {
    content : "\200B";
    position: absolute;
  }
}

.footnote-ref {
  font-family: var(--font-sans);
}
